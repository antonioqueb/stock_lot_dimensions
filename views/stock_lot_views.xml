<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stock_lot_form_inherit" model="ir.ui.view">
        <field name="name">stock.lot.form.inherit.dimensions</field>
        <field name="model">stock.lot</field>
        <field name="inherit_id" ref="stock.view_production_lot_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <group string="Dimensiones" col="4">
                    <field name="x_grosor" string="Grosor (cm)"/>
                    <field name="x_alto" string="Alto (m)"/>
                    <field name="x_ancho" string="Ancho (m)"/>
                    <field name="x_cantidad_fotos" readonly="1"/>
                </group>
            </xpath>
            
            <xpath expr="//sheet" position="inside">
                <notebook>
                    <page string="Fotografías" name="fotografias">
                        <field name="x_fotografia_ids" mode="kanban">
                            <kanban>
                                <field name="id"/>
                                <field name="name"/>
                                <field name="image_small"/>
                                <field name="sequence"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div class="oe_kanban_global_click" style="text-align: center;">
                                            <div class="o_kanban_image">
                                                <img t-att-src="kanban_image('stock.lot.image', 'image_small', record.id.raw_value)" 
                                                     alt="Fotografía" 
                                                     style="max-width: 150px; max-height: 150px; border: 1px solid #ddd; border-radius: 4px;"/>
                                            </div>
                                            <div class="oe_kanban_details">
                                                <strong><field name="name"/></strong>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <form>
                                <sheet>
                                    <group>
                                        <field name="name"/>
                                        <field name="sequence"/>
                                        <field name="fecha_captura" readonly="1"/>
                                    </group>
                                    <group>
                                        <field name="image" widget="image" options="{'size': [800, 600]}"/>
                                    </group>
                                    <group>
                                        <field name="notas" placeholder="Notas adicionales sobre esta fotografía..."/>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

    <record id="view_stock_lot_tree_inherit" model="ir.ui.view">
        <field name="name">stock.lot.tree.inherit.dimensions</field>
        <field name="model">stock.lot</field>
        <field name="inherit_id" ref="stock.view_production_lot_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="x_grosor" optional="hide" string="Grosor (cm)"/>
                <field name="x_alto" optional="hide" string="Alto (m)"/>
                <field name="x_ancho" optional="hide" string="Ancho (m)"/>
                <field name="x_fotografia_principal" widget="image" optional="hide"/>
                <field name="x_cantidad_fotos" optional="show"/>
            </xpath>
        </field>
    </record>
</odoo>